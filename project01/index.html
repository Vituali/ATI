<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatizador de Chat Humanizado</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/layout.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <link rel="stylesheet" href="assets/css/themes.css">
    <link rel="icon" href="assets/images/favicon.ico">
    <!-- pdfjsLib for conversor.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
</head>
<body class="light-mode">
    <div id="popup"></div>

    <!-- Customization Popup -->
    <div class="customization-popup popup" id="customizationPopup" style="display: none;">
        <h2>ğŸ¨ Personalizar Interface</h2>
        <div class="customization-content">
            <label>
                ğŸŒ™ Modo Escuro:
                <input type="checkbox" id="themeToggle" onchange="updateTheme()">
            </label>
            <label>
                âœ¨ Ativar Bordas Neon:
                <input type="checkbox" id="neonBorders">
            </label>
            <label>
                ğŸ¯ Cor dos Ãcones:
                <input type="color" id="iconColor">
            </label>
            <label>
                ğŸ”² Cor das Bordas:
                <input type="color" id="borderColor">
            </label>
            <button class="button" onclick="saveCustomization()">ğŸ’¾ Salvar</button>
            <button class="button" onclick="closeCustomizationPopup()">âŒ Cancelar</button>
        </div>
    </div>

    <!-- Atendente Popup -->
    <div class="popup" id="atendentePopup" style="display: none;">
        <h2>ğŸ‘¤ Selecionar Atendente</h2>
        <label>Escolha seu nome:</label>
        <select id="atendente">
            <option value="">Selecione um atendente</option>
            <option value="victor">Victor</option>
            <option value="bruno">Bruno</option>
            <option value="lucas">Lucas</option>
            <option value="igor">Igor</option>
            <option value="diego">Diego</option>
            <option value="jefferson">Jefferson</option>
            <option value="helio">Helio</option>
            <option value="marlon">Marlon</option>
        </select>
        <button class="button" onclick="selecionarAtendente()">âœ… Fechar</button>
    </div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <button class="toggle-sidebar" id="toggleSidebar">â˜°</button>
        <button class="sidebar-button" onclick="showSection('chat')">
            <span class="icon">ğŸ’¬</span> <span class="text">Chat</span>
        </button>
        <button class="sidebar-button" onclick="showSection('conversor')">
            <span class="icon">ğŸ“„</span> <span class="text">Conversor de Aditivo</span>
        </button>
        <button class="bottom-toggle" onclick="openAtendentePopup()">
            <span class="icon">ğŸ‘¤</span> <span class="text">Selecionar Atendente</span>
        </button>
        <button class="bottom-toggle" id="darkModeToggle">
            <span class="icon">ğŸŒ™</span> <span class="text">Personalizar</span>
        </button>
    </div>

    <!-- Chat Section -->
    <div id="chatSection" style="display: block;">
        <div class="card">
            <h2><span id="saudacao">Bom dia</span></h2>
            <h1>ğŸ¤– Automatizador de Chat Humanizado ğŸ¤–</h1>
            <label>Escolha uma opÃ§Ã£o:</label>
            <select id="opcoes" onchange="responder()">
                <option value="">Selecione uma opÃ§Ã£o</option>
            </select>
            <div id="titleContainer" style="display: none;">
                <input type="text" id="titulo">
                <button class="button" onclick="salvarNovoTitulo()">ğŸ’¾ Salvar TÃ­tulo</button>
            </div>
            <label>Mensagem:</label>
            <textarea id="resposta" oninput="ajustarAlturaTextarea()"></textarea>
            <div>
                <button class="button copy-btn" onclick="copiarTexto()">ğŸ“‹ Copiar</button>
                <button class="button" onclick="toggleEditarTitulo()">âœï¸ Editar TÃ­tulo</button>
                <button class="button" onclick="salvarEdicao()">ğŸ’¾ Salvar</button>
                <button class="button" onclick="alterarCategoria()">ğŸ“ Alterar Categoria</button>
                <button class="button" onclick="apagarTexto()">ğŸ—‘ï¸ Apagar</button>
                <button class="button" onclick="mostrarPopupAdicionar()">â• Adicionar</button>
            </div>
            <p>ğŸ’¡ Salvar <i>bom dia</i> e <i>tenha uma excelente manhÃ£</i> como <b>[SAUDACAO]</b> and <b>[DESPEDIDA]</b> para alterar automaticamente com o horÃ¡rio</p>
        </div>
    </div>

    <!-- Conversor Section -->
    <div id="conversorSection" style="display: none;">
        <div class="card">
            <h2><span id="saudacao">Bom dia</span></h2>
            <h1>ğŸ“„ Conversor de Aditivo</h1>
            <div id="uploadSection">
                <div class="upload-card">
                    <h3>ğŸ“ Carregar Aditivo PDF</h3>
                    <label class="file-label">
                        ğŸ“ Escolher Arquivo
                        <input type="file" id="pdfUpload" accept=".pdf" style="display: none;">
                    </label>
                    <p id="fileName">Nenhum arquivo selecionado</p>
                    <button class="button" onclick="loadPDF()">ğŸ” Carregar e Extrair Dados</button>
                </div>
            </div>
            <div id="dataSection" style="display: none;">
                <button class="button" onclick="backToUpload()">â¬…ï¸ Voltar Ã  PÃ¡gina Inicial</button>
                <h2>ğŸ“‹ Agendamento para Contrato - <span id="contratoSpan"></span></h2>
                <div class="card">
                    <h3>ğŸ“Š Dados Gerais</h3>
                    <p><b>ğŸ“„ Contrato:</b> <span id="contrato"></span></p>
                    <p><b>ğŸ‘¤ Nome:</b> <span id="nome"></span></p>
                    <p><b>ğŸ“ EndereÃ§o Antigo:</b> <span id="oldAddress"></span></p>
                    <p><b>ğŸ†• EndereÃ§o Novo:</b> <span id="newAddress"></span></p>
                    <p><b>ğŸ“ Motivo:</b> MUD ENDEREÃ‡O</p>
                    <label>
                        ğŸ“ NÃºmero de Telefone:
                        <input type="text" id="phone">
                    </label>
                    <p id="phoneError" style="color: red;"></p>
                    <label>
                        ğŸ“± Tipo de Comodato:
                        <select id="equipmentType">
                            <option value="ALCL">ALCL</option>
                            <option value="PROPRIO">PROPRIO</option>
                            <option value="HUAWEI">HUAWEI</option>
                            <option value="TP LINK">TP LINK</option>
                        </select>
                    </label>
                </div>
                <div class="card">
                    <h3>ğŸ“¤ Retirada</h3>
                    <label>
                        <input type="checkbox" id="selfWithdrawal">
                        Cliente faz a retirada por conta prÃ³pria?
                    </label>
                    <div id="withdrawalSection">
                        <label>
                            ğŸ“… Data de Retirada (a partir de amanhÃ£):
                            <input type="date" id="withdrawalDate" required>
                        </label>
                        <label>
                            â° PerÃ­odo de Retirada:
                            <select id="withdrawalPeriod" required>
                                <option value="ManhÃ£">ğŸŒ… ManhÃ£</option>
                                <option value="Tarde">ğŸŒ‡ Tarde</option>
                            </select>
                        </label>
                    </div>
                </div>
                <div class="card">
                    <h3>ğŸ“¥ InstalaÃ§Ã£o</h3>
                    <label>
                        ğŸ“… Data de InstalaÃ§Ã£o (nÃ£o antes da retirada):
                        <input type="date" id="installationDate" required>
                    </label>
                    <label>
                        â° PerÃ­odo de InstalaÃ§Ã£o:
                        <select id="installationPeriod" required>
                            <option value="ManhÃ£">ğŸŒ… ManhÃ£</option>
                            <option value="Tarde">ğŸŒ‡ Tarde</option>
                        </select>
                    </label>
                </div>
                <div class="card">
                    <h3>ğŸ“‹ Detalhes do Contrato</h3>
                    <label>
                        <input type="checkbox" id="renewal">
                        Ã‰ RenovaÃ§Ã£o? (Se sim, isento de taxa)
                    </label>
                    <label>
                        <input type="checkbox" id="migration">
                        Ã‰ MigraÃ§Ã£o? (Se sim, isento de taxa)
                    </label>
                    <p id="renewalMessage" style="display: none;">âœ… Taxa isenta devido Ã  renovaÃ§Ã£o.</p>
                    <p id="migrationMessage" style="display: none;">âœ… Taxa isenta devido Ã  migraÃ§Ã£o.</p>
                    <label>
                        ğŸ’° Valor da Taxa:
                        <select id="taxValue">
                            <option value="100">R$ 100</option>
                            <option value="65">R$ 65</option>
                            <option value="50">R$ 50</option>
                            <option value="isento">Isento</option>
                        </select>
                    </label>
                    <label>
                        âœï¸ Tipo de Assinatura:
                        <select id="signature">
                            <option value="Digital">ğŸ“± Assinatura Digital</option>
                            <option value="Local">ğŸ“ Assinatura no Local</option>
                        </select>
                    </label>
                </div>
                <button class="button" onclick="generateOS()">âš¡ Gerar O.S</button>
                <textarea id="output" class="output" readonly></textarea>
                <div id="copyButtons" style="display: none;">
                    <button class="button copy-btn" onclick="copyWithdrawal()">ğŸ“¤ Copiar Retirada</button>
                    <button class="button copy-btn" onclick="copyInstallation()">ğŸ“¥ Copiar InstalaÃ§Ã£o</button>
                    <button class="button copy-btn" onclick="copyOS()">ğŸ“‹ Copiar O.S</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase Modular SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
        import { getAuth, signInAnonymously } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js';
        import { getDatabase } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js';

        // Export Firebase objects for use in other modules
        window.firebaseApp = initializeApp;
        window.firebaseAuth = getAuth;
        window.firebaseDatabase = getDatabase;
        window.firebaseSignInAnonymously = signInAnonymously;
    </script>

    <!-- Application Scripts -->
    <script type="module" src="assets/js/main.js"></script>
    <script type="module" src="assets/js/chat.js"></script>
    <script type="module" src="assets/js/script.js"></script>
    <script type="module" src="assets/js/darkmode.js"></script>
    <script type="module" src="assets/js/conversor.js"></script>
</body>
</html>