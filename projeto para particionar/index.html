<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatizador de Chat</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <script type="module" src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script type="module" src="main.js" defer></script>
    <script type="module" src="script.js" defer></script>
    <script type="module" src="conversor.js" defer></script>
</head>
<body>
    <div id="popup" class="popup"></div>

    <div id="customizationPopup" class="customization-popup" style="display: none;">
        <h3>Personalizar Cores</h3>
        <div class="customization-group">
            <div class="theme-options">
                <label>Modo Escuro:</label>
                <label class="switch">
                    <input type="checkbox" id="themeToggle">
                    <span class="slider"></span>
                </label>
                <label>Ativar Bordas Neon:</label>
                <label class="switch">
                    <input type="checkbox" id="neonBorders">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
        <div class="customization-group">
            <label>Cor dos √çcones:</label>
            <input type="color" id="iconColor" value="#1B6A6C">
        </div>
        <div class="customization-group">
            <label>Cor das Bordas:</label>
            <input type="color" id="borderColor" value="#1B6A6C">
        </div>
        <div class="customization-buttons">
            <button class="button" onclick="saveCustomization()">Salvar</button>
            <button class="button" onclick="closeCustomizationPopup()">Cancelar</button>
        </div>
    </div>

    <div id="atendentePopup" class="popup" style="display: none;">
        <h3>Selecionar Atendente</h3>
        <select id="atendente">
            <option value="">Selecione um atendente</option>
            <option value="victor">Victor</option>
            <option value="bruno">Bruno</option>
            <option value="lucas">Lucas</option>
            <option value="igor">Igor</option>
            <option value="diego">Diego</option>
            <option value="jefferson">Jefferson</option>
            <option value="helio">Helio</option>
            <option value="marlon">Marlon</option>
        </select>
        <button class="button" onclick="selecionarAtendente()">Selecionar</button>
        <button class="button" onclick="closeAtendentePopup()">Fechar</button>
    </div>

    <div class="chatbox">
        <div id="sidebar" class="sidebar">
            <button id="toggleSidebar" class="toggle-sidebar">‚ò∞</button>
            <button class="sidebar-button" onclick="showSection('chat')"><span class="icon">üó®Ô∏è</span><span class="text">Chat</span></button>
            <button class="sidebar-button" onclick="showSection('conversor')"><span class="icon">üìÑ</span><span class="text">Conversor de Aditivo</span></button>
            <button id="atendenteToggle" class="bottom-toggle" onclick="openAtendentePopup()"><span class="icon">üë§</span><span class="text">Selecionar Atendente</span></button>
            <button id="darkModeToggle" class="dark-mode-toggle"><span class="icon">üåô</span><span class="text">Modo Escuro</span></button>
        </div>

        <div class="content">
            <div id="chatSection" style="display: block;">
                <div class="card">
                    <h1>ü§ñ Automatizador de Chat ü§ñ</h1>
                    <div class="grupo">
                        <label>Escolha uma op√ß√£o:</label>
                        <select id="opcoes" onchange="responder()">
                            <option value="">Selecione uma op√ß√£o</option>
                        </select>
                    </div>
                    <div id="titleContainer" class="title-container" style="display: none;">
                        <input type="text" id="titulo" placeholder="Novo T√≠tulo">
                        <button class="button" onclick="salvarNovoTitulo()">Salvar T√≠tulo</button>
                    </div>
                    <div class="grupo">
                        <label>Mensagem:</label>
                        <textarea id="resposta" oninput="ajustarAlturaTextarea()"></textarea>
                    </div>
                    <div class="controls">
                        <button class="button copy-btn" onclick="copiarTexto()">üìã Copiar</button>
                        <button class="button" onclick="editarTitulo()">Editar T√≠tulo</button>
                        <button class="button" onclick="salvarEdicao()">Salvar</button>
                        <button class="button" onclick="apagarTexto()">Apagar</button>
                        <button class="button" onclick="mostrarPopupAdicionar()">Adicionar</button>
                    </div>
                    <p>Salve e use como [SAUDACAO] E [DESPEDIDA] para alterar automaticamente com o hor√°rio</p>
                </div>
            </div>

            <div id="conversorSection" style="display: none;">
                <div class="upload-card">
                    <h2>Conversor de Aditivo</h2>
                    <div id="uploadSection" class="upload-content">
                        <h4>Carregar Aditivo PDF</h4>
                        <div class="file-upload-wrapper">
                            <input type="file" id="pdfUpload" class="file-input" accept=".pdf">
                            <label for="pdfUpload" class="file-label">Escolher Arquivo</label>
                            <span class="file-name" id="fileName">Nenhum arquivo selecionado</span>
                        </div>
                        <button class="button" onclick="loadPDF()">Carregar e Extrair Dados</button>
                    </div>
                </div>

                <div class="dual-grid" id="dataSection" style="display: none;">
                    <button class="button back" onclick="backToUpload()">Voltar √† P√°gina Inicial</button>
                    <h3>Agendamento para Contrato <span id="contrato"></span> - <span id="saudacaoDespedidaText">[saudacao]</span></h3>
                    <div class="card">
                        <h4>Dados Gerais</h4>
                        <div class="grupo">
                            <p>Contrato: <span id="contratoSpan"></span></p>
                            <p>Nome: <span id="nome"></span></p>
                            <p>Endere√ßo Antigo: <span id="oldAddress"></span></p>
                            <p>Endere√ßo Novo: <span id="newAddress"></span></p>
                            <p>Motivo: MUD ENDERE√áO</p>
                            <div class="inline-group">
                                <div>
                                    <label>N√∫mero de Telefone:</label>
                                    <input type="text" id="phone">
                                    <span id="phoneError" class="error"></span>
                                </div>
                                <div>
                                    <label>Tipo de Comodato:</label>
                                    <select id="equipmentType">
                                        <option value="ALCL">ALCL</option>
                                        <option value="PROPRIO">PROPRIO</option>
                                        <option value="HUAWEI">HUAWEI</option>
                                        <option value="TP LINK">TP LINK</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <h4>Retirada</h4>
                        <div class="grupo">
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="selfWithdrawal">
                                    <span class="checkbox-custom"></span>
                                    Cliente faz a retirada por conta pr√≥pria?
                                </label>
                            </div>
                            <div id="withdrawalSection">
                                <label>Data de Retirada (a partir de amanh√£):</label>
                                <input type="date" id="withdrawalDate">
                                <label>Per√≠odo de Retirada:</label>
                                <select id="withdrawalPeriod">
                                    <option value="Manh√£">Manh√£</option>
                                    <option value="Tarde">Tarde</option>
                                </select>
                            </div>
                        </div>
                        <h4>Instala√ß√£o</h4>
                        <div class="grupo">
                            <label>Data de Instala√ß√£o (n√£o antes da retirada):</label>
                            <input type="date" id="installationDate">
                            <label>Per√≠odo de Instala√ß√£o:</label>
                            <select id="installationPeriod">
                                <option value="Manh√£">Manh√£</option>
                                <option value="Tarde">Tarde</option>
                            </select>
                        </div>
                    </div>
                    <div class="card">
                        <h4>Detalhes do Contrato</h4>
                        <div class="grupo">
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="renewal">
                                    <span class="checkbox-custom"></span>
                                    √â Renova√ß√£o? (Se sim, isento de taxa)
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="migration">
                                    <span class="checkbox-custom"></span>
                                    √â Migra√ß√£o? (Se sim, isento de taxa)
                                </label>
                            </div>
                            <p id="renewalMessage" style="display: none;">Taxa isenta devido √† renova√ß√£o.</p>
                            <p id="migrationMessage" style="display: none;">Taxa isenta devido √† migra√ß√£o.</p>
                        </div>
                        <div class="grupo">
                            <label>Valor da Taxa:</label>
                            <select id="taxValue">
                                <option value="100">100</option>
                                <option value="65">65</option>
                                <option value="50">50</option>
                                <option value="Isento">Isento</option>
                            </select>
                        </div>
                        <div class="grupo">
                            <label>Tipo de Assinatura:</label>
                            <select id="signature">
                                <option value="Assinatura Digital">Assinatura Digital</option>
                                <option value="Assinatura no Local">Assinatura no Local</option>
                            </select>
                        </div>
                    </div>
                    <button class="button" onclick="generateOS()">Gerar O.S</button>
                    <div class="output" id="output"></div>
                    <div id="copyButtons" class="copy-buttons" style="display: none;">
                        <button class="button copy-btn" onclick="copyWithdrawal()">Copiar Retirada</button>
                        <button class="button copy-btn" onclick="copyInstallation()">Copiar Instala√ß√£o</button>
                        <button class="button copy-btn" onclick="copyOS()">Copiar O.S</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>