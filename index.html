<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATI - Auxiliar de Atendimentos</title>

    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
    <link rel="stylesheet" href="assets/css/main.css">

    <style type="text/css">
        @font-face {
            font-family: Orbitron;
            font-style: normal;
            font-weight: 400;
            src: url(https://fonts.gstatic.com/s/orbitron/v31/yMJRMIlzdpvBhQQL_Qq7dy0.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
</head>

<body class="dark-mode">

    <div id="popup" class="popup"></div>
    
    <div id="auth-overlay" class="modal-overlay" style="display: none;">
        <div class="modal-content card" style="max-width: 450px;">
                    <!--============ SISTEMA DE LOGIN ============-->
            <form id="login-form">
                <h3>Login - ATI</h3>
                <div class="modal-form-group">
                    <label for="loginIdentifier">Usu√°rio ou E-mail:</label>
                    <input type="text" id="loginIdentifier" required autocomplete="username">
                </div>
                <div class="modal-form-group">
                    <label for="loginPassword">Senha:</label>
                    <input type="password" id="loginPassword" required autocomplete="current-password">
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="button">Entrar</button>
                </div>
                <p class="auth-toggle-link">Ainda n√£o tem conta? <a href="#" id="show-register">Registre-se</a></p>
            </form>
                    <!--============ SISTEMA DE REGISTRO ============-->
            <form id="register-form" style="display: none;">
                <h3>Registro - Novo Atendente</h3>
                <div class="modal-form-group">
                    <label for="registerUsername">Nome de Usu√°rio (Login):</label>
                    <input type="text" id="registerUsername" required placeholder="tudo min√∫sculo, sem espa√ßos">
                </div>
                <div class="modal-form-group">
                    <label for="registerFullName">Nome e Sobrenome:</label>
                    <input type="text" id="registerFullName" required placeholder="Ser√° exibido no seletor">
                </div>
                <div class="modal-form-group">
                    <label for="registerEmail">Email:</label>
                    <input type="email" id="registerEmail" required autocomplete="email">
                </div>
                <div class="modal-form-group">
                    <label for="registerPassword">Senha (m√≠nimo 6 caracteres):</label>
                    <input type="password" id="registerPassword" required autocomplete="new-password">
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="button">Registrar</button>
                </div>
                <p class="auth-toggle-link">J√° tem uma conta? <a href="#" id="show-login">Fa√ßa Login</a></p>
            </form>
        </div>
    </div>
                    <!--============ SISTEMA DA SIDEBAR ============-->    
<div class="chatbox" style="display: none;">
    <div id="sidebar" class="sidebar">
        <button id="toggleSidebarBtn" class="toggle-sidebar" aria-label="Abrir ou fechar menu lateral">‚ò∞</button>
        <button class="sidebar-button active" data-section="chat"><span class="icon">üó®Ô∏è</span><span class="text">Chat</span></button>
        <button class="sidebar-button" data-section="os"><span class="icon">üìù</span><span class="text">Modelos O.S.</span></button>
        <button class="sidebar-button" data-section="conversor"><span class="icon">üìÑ</span><span class="text">Conversor</span></button>
        <a href="extensao-ati.zip" class="sidebar-button" download>
            <span class="icon">üì•</span>
            <span class="text">Baixar Extens√£o</span>
        </a>
                    <!--============ ATENDENTE ============-->  
            <div class="sidebar-footer">
                <button id="atendenteToggleBtn" class="bottom-toggle" data-tooltip="Abrir perfil do usu√°rio">
                    <span class="icon">üë§</span>
                    <span class="text">Perfil</span>
                </button>
                    <!--============ PERSONALIZADOR ============--> 
                <button id="darkModeToggleBtn" class="bottom-toggle" data-tooltip="Personalizar interface">
                    <span class="icon">‚öôÔ∏è</span><span class="text">Personalizar</span>
                </button>
            </div>
        </div>
                    <!--============ SISTEMA DO CHAT ============-->
        <div class="content">

            <div id="chatSection">
                <h1 id="saudacaoChat"></h1>
                <h2>ü§ñ Automatizador de Chat Humanizado ü§ñ</h2>
                <div class="card">
                    <div class="card-loader" id="chatLoader" style="display: none;">
                        <div class="loader"></div>
                    </div>

                    <div class="grupo">
                        <div id="custom-select" class="custom-select">
                            <div class="select-selected" id="select-display">Selecione uma resposta</div>
                            <div class="select-items select-hide" id="select-items">
                                </div>
                        </div>
                    </div>                 
                    
                    <div id="titleContainer" class="title-container" style="display: none;">
                        <input type="text" id="titulo" placeholder="T√≠tulo da resposta">
                        <button id="saveTitleBtn" class="button">Salvar T√≠tulo</button>
                    </div>
                    
                    <div class="grupo">
                        <label for="resposta">Mensagem:</label>
                        <textarea id="resposta" rows="4"></textarea>
                    </div>
                    <!--============ BOT√ïES DO CHAT ============-->
                    <div class="controls">
                        <button id="copyBtn" class="button copy-btn" data-tooltip="Copiar mensagem">üìã Copiar</button>
                        <button id="editTitleBtn" class="button" data-tooltip="Editar t√≠tulo">‚úèÔ∏è Editar T√≠tulo</button>
                        <button id="saveEditBtn" class="button" data-tooltip="Salvar mensagem">üíæ Salvar</button>
                        <button id="deleteBtn" class="button" data-tooltip="Apagar resposta">üóëÔ∏è Apagar</button>
                        <button id="addBtn" class="button" data-tooltip="Adicionar nova resposta">‚ûï Adicionar</button>
                    </div>
                    
                    <p id="saudacaoDespedidaText">Use [SAUDACAO] e [DESPEDIDA] para textos din√¢micos.</p>
                </div>
            </div>
            <!--============ SISTEMA DO EDITOR DE O.S ============-->
            <div id="osSection" style="display: none;">
                    <h1>Editor de Modelos de O.S.</h1>
                    <h2>Crie e gerencie os templates para a cria√ß√£o de Ordens de Servi√ßo.</h2>

    <div class="os-editor-layout">
        <div class="os-list-container card">
            <h3>Seus Modelos</h3>
            <div id="os-list" class="os-list">
                </div>

             <button id="os-reset-btn" class="button back" style="width: 100%; margin-top: 15px;">Resetar para Padr√£o</button>
        </div>

        <div class="os-form-container card">
            <form id="os-form">
                <input type="hidden" id="os-edit-index">
                <h3 id="os-form-title">Selecione ou crie um modelo</h3>

                <div class="grupo">
                    <label for="os-title">T√≠tulo do Modelo:</label>
                    <input type="text" id="os-title" placeholder="Ex: Sem Conex√£o" required>
                </div>

                <div class="grupo">
                    <label for="os-text">Texto da O.S.:</label>
                    <textarea id="os-text" rows="5" placeholder="Ex: CLIENTE SEM ACESSO. REALIZADO OS PROCEDIMENTOS..."></textarea>
                </div>

                <div class="grupo">
                    <label for="os-category">Categoria:</label>
                    <select id="os-category">
                        <option value="Suporte">Suporte</option>
                        <option value="Financeiro">Financeiro</option>
                        <option value="Comercial">Comercial</option>
                        <option value="Geral">Geral</option>
                        </select>
                </div>

                <div class="grupo">
                    <label for="os-keywords">Palavras-chave (separadas por v√≠rgula):</label>
                    <input type="text" id="os-keywords" placeholder="sem conexao, nao funciona, caiu">
                </div>

                <div class="controls">
                    <button type="submit" id="os-save-btn" class="button">Salvar</button>
                    <button type="button" id="os-new-btn" class="button">Novo Modelo</button>
                    <button type="button" id="os-delete-btn" class="button back" style="display: none;">Apagar</button>
                </div>
            </form>
        </div>
    </div>
</div>
                    <!--============ SISTEMA DO CONVERSOR ============-->
            <div id="conversorSection" style="display: none;">
                <h1 id="saudacaoConversor"></h1>
                <h2>Conversor de Aditivo</h2>
                
                <div id="uploadSection" class="upload-card">
                    <div class="upload-content">
                        <h3>Carregar Aditivo PDF</h3>
                        <div class="file-upload-wrapper">
                            <label for="pdfUpload" class="file-label">Escolher Arquivo</label>
                            <input type="file" id="pdfUpload" class="file-input" accept="application/pdf">
                            <span id="fileName" class="file-name">Nenhum arquivo selecionado</span>
                        </div>
                        <button class="button" id="loadPdfBtn">Carregar e Extrair Dados</button>
                    </div>
                </div>
                
                <div id="dataSection" style="display: none;">
                    <button class="button back" id="backToUploadBtn">Voltar</button>
                    <h3>Agendamento para Contrato - <span id="contratoSpan"></span></h3>
                
                    <div class="dual-grid">
                        <div class="card">
                            <h4>Dados Gerais</h4>
                            <div class="grupo">
                                <p><strong>Contrato:</strong> <span id="contrato"></span></p>
                                <p><strong>Nome:</strong> <span id="nome"></span></p>
                                <p><strong>Endere√ßo Antigo:</strong> <span id="oldAddress"></span></p>
                                <p><strong>Endere√ßo Novo:</strong> <span id="newAddress"></span></p>
                                <div class="inline-group">
                                    <div>
                                        <label for="phone">N√∫mero de Telefone:</label>
                                        <input type="text" id="phone" placeholder="21 99999-9999" autocomplete="tel">
                                        <span id="phoneError" class="error"></span>
                                    </div>
                                    <div>
                                        <label for="equipmentType">Tipo de Comodato:</label>
                                        <select id="equipmentType">
                                            <option value="alcl">ALCL</option>
                                            <option value="proprio">PROPRIO</option>
                                            <option value="huawei">HUAWEI</option>
                                            <option value="tp link">TP LINK</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <h4>Detalhes do Contrato</h4>
                            <div class="grupo checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="renewal">
                                    <span class="checkbox-custom"></span> √â Renova√ß√£o? (Isento de taxa)
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="migration">
                                    <span class="checkbox-custom"></span> √â Migra√ß√£o? (Isento de taxa)
                                </label>
                            <div id="carrierSection" class="grupo" style="display: none; margin-top: 15px;">
                                <label for="oldCarrier">Antigo Portador:</label>
                                <select id="oldCarrier">
                                <option value="none">Sem altera√ß√£o ou digitais</option>
                                <option value="ITAU AGT">BANCO ITA√ö - AGANTANGELO</option>
                                <option value="GERENCIANET AGT">GERENCIANET - AGATANGELO</option>
                                <option value="ITAU ATI">BANCO ITAU - ATI</option>
                                <option value="GERENCIANET - BANDA LARGA">GERENCIANET - ATI INTERNET BANDA LARGA</option>
                                </select>
                            </div>
                                <p id="renewalMessage" style="display: none;">Taxa isenta devido √† renova√ß√£o.</p>
                                <p id="migrationMessage" style="display: none;">Taxa isenta devido √† migra√ß√£o.</p>
                            </div>
                            <div class="inline-group">
                                <div>
                                    <label for="taxValue">Valor da Taxa:</label>
                                    <select id="taxValue">
                                        <option value="100">R$ 100</option>
                                        <option value="65">R$ 65</option>
                                        <option value="50">R$ 50</option>
                                        <option value="isento">Isento</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="signature">Tipo de Assinatura:</label>
                                    <select id="signature">
                                        <option value="digital">Assinatura Digital</option>
                                        <option value="local">Assinatura no Local</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dual-grid">
                        <div class="card">
                            <h4>Retirada</h4>
                            <div class="grupo checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="selfWithdrawal">
                                    <span class="checkbox-custom"></span> Cliente faz a retirada
                                </label>
                            </div>
                            <div id="withdrawalSection" class="grupo">
                                <label for="withdrawalDate">Data de Retirada:</label>
                                <input type="date" id="withdrawalDate">
                                <label for="withdrawalPeriod">Per√≠odo de Retirada:</label>
                                <select id="withdrawalPeriod">
                                    <option value="Manh√£">Manh√£</option>
                                    <option value="Tarde">Tarde</option>
                                </select>
                            </div>
                        </div>
                        <div class="card">
                            <h4>Instala√ß√£o</h4>
                            <div class="grupo">
                                <label for="installationDate">Data de Instala√ß√£o:</label>
                                <input type="date" id="installationDate">
                                <label for="installationPeriod">Per√≠odo de Instala√ß√£o:</label>
                                <select id="installationPeriod">
                                    <option value="Manh√£">Manh√£</option>
                                    <option value="Tarde">Tarde</option>
                                </select>
                            </div>
                        </div>
                    </div>
                  
                    <div class="card">
                        <button class="button" id="generateOsBtn">Gerar O.S</button>
                        <textarea id="output" class="output" readonly></textarea>
                        <div id="copyButtons" class="copy-buttons" style="display: none;">
                            <button class="button copy-btn" id="copyWithdrawalBtn">Copiar Retirada</button>
                            <button class="button copy-btn" id="copyInstallationBtn">Copiar Instala√ß√£o</button>
                            <button class="button copy-btn" id="copyOsBtn">Copiar O.S</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
                    <!--============ MODAL DO PERSONALIZADOR ============-->
    <div id="customizationPopup" class="customization-popup" style="display: none;">
        <h2>Personalizar Cores</h2>
        <div class="customization-grid">
            <div class="popup-column">
                <label class="popup-label">
                    <span>Modo Escuro</span>
                    <label class="switch"><input type="checkbox" id="themeToggle"><span class="slider"></span></label>
                </label>
                <label class="popup-label">
                    <span>Ativar Bordas Neon</span>
                    <label class="switch"><input type="checkbox" id="neonBorders"><span class="slider"></span></label>
                </label>
            </div>
            <div class="popup-column">
                <label class="popup-label">
                    <span>Cor dos √çcones</span>
                    <input type="color" id="iconColor">
                </label>
                <label class="popup-label">
                    <span>Cor das Bordas e Bot√µes</span>
                    <input type="color" id="borderColor">
                </label>
                <label class="popup-label">
                    <span>Cor dos T√≠tulos</span>
                    <input type="color" id="textColor">
                </label>
            </div>
        </div>
        <div class="customization-buttons">
            <button class="button" id="saveCustomizationBtn">Salvar</button>
            <button class="button back" id="closeCustomizationBtn">Cancelar</button>
        </div>
    </div>
                    <!-- ===== MODAL DE PERFIL DO USUARIO ===== -->
    <div id="profileModal" class="modal-overlay" style="display: none;">
        <div class="modal-content card">
            <h3>Perfil do Usu√°rio</h3>
          
            <form id="update-fullname-form">
                <div class="modal-form-group">
                    <label for="newFullName">Alterar Nome Completo:</label>
                    <input type="text" id="newFullName" placeholder="Seu nome e sobrenome">
                </div>
                <button type="submit" class="button">Salvar Nome</button>
            </form>
            <hr style="margin: 20px 0;">
          
            <form id="update-password-form">
                <div class="modal-form-group">
                    <label for="newPassword">Alterar Senha:</label>
                    <input type="password" id="newPassword" placeholder="Nova senha (m√≠n. 6 caracteres)" autocomplete="new-password">
                </div>
                <button type="submit" class="button">Salvar Nova Senha</button>
            </form>
            <hr style="margin: 20px 0;">
                    <!--============ SE√á√ÉO ADMIN ============-->
            <div id="admin-link-container" style="display: none;">
                <a href="admin.html" class="button">Painel do Administrador</a>
            </div>
            <div class="modal-buttons" style="margin-top: 20px;">
                <button id="modalLogoutBtn" class="button back">Sair (Logout)</button>
                <button id="modalCloseProfileBtn" class="button back">Fechar</button>
            </div>
        </div>
    </div>
                    <!--============ MODAL PARA EXCLUS√ÉO ============-->
    <div id="confirmationModal" class="modal-overlay" style="display: none;">
        <div class="modal-content card">
            <h3 id="modalTitle">Confirmar A√ß√£o</h3>
            <p id="modalMessage">Voc√™ tem certeza que deseja continuar?</p>
            <div class="modal-buttons">
                <button id="modalConfirmBtn" class="button">Confirmar</button>
                <button id="modalCancelBtn" class="button back">Cancelar</button>
            </div>
        </div>
    </div>
                    <!--============ MODAL PARA ADI√á√ÉO DE RESPOSTA ============-->
    <div id="addResponseModal" class="modal-overlay" style="display: none;">
        <div class="modal-content card">
            <h3>Adicionar Nova Resposta</h3>
            <div class="modal-form-group">
                <label for="newResponseTitle">T√≠tulo da Resposta:</label>
                <input type="text" id="newResponseTitle" placeholder="Ex: Problema de conex√£o">
            </div>
            <div class="modal-form-group">
                <label for="newResponseCategory">Categoria:</label>
                <input type="text" id="newResponseCategory" placeholder="Ex: suporte (ou deixe em branco para 'geral')">
            </div>
            <div class="modal-buttons">
                <button id="modalSaveNewBtn" class="button">Salvar</button>
                <button id="modalCancelNewBtn" class="button back">Cancelar</button>
            </div>
        </div>
    </div>
   
    <script type="module" src="assets/js/app.js"></script>

</body>

</html>
